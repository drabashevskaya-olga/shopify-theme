{{ 'text-with-video.css' | asset_url | stylesheet_tag }}

{{ 'video-modal.css' | asset_url | stylesheet_tag }}

{{ 'video-section.css' | asset_url | stylesheet_tag }}
{{ 'component-deferred-media.css' | asset_url | stylesheet_tag }}

<section class="video-section-community">
<div class="page-width">
  <div class="community-warpper-box">
		<div class="community-warpper-data">
  <div class="community-warpper-content">

    <h2 class="heading">{{ section.settings.heading }}</h2>
    <h3>{{ section.settings.sub_heading }}</h3>

    <div class="sub_heading">
      {{ section.settings.description }}
      <a href="{{ section.settings.button_url }}" class="read-more-btn">{{ section.settings.button_label }}</a>
    </div>

  </div>

  <div class="community-warpper-image">
    <img src="{{section.settings.image | img_url: 'master'}}">
    <div class="community-video-icon">
      <div class="pop-container">
 
  <button onclick="document.getElementById('id01-{{ section.id }}').style.display='block'" class="popvideo-button"> <img src="{{'video-icon.png' | asset_url}}">
</button>

  <div id="id01-{{ section.id }}" class="video-pop-modal">
    <div class="video-pop-modal-content">
      <div class="pop-container">
        <span onclick="document.getElementById('id01-{{ section.id }}').style.display='none'" class="video-close-button">&times;</span>
       
<!--    Video Modal   -->
        
        <div class="video-section-pop">
  <noscript>
    <div class="video-section__media"
      {% if section.settings.cover_image != blank %} style="padding-bottom: {{ 1 | divided_by: section.settings.cover_image.aspect_ratio | times: 100 }}%;"{% endif %}
    >
      <a href="{{ section.settings.video_url }}" class="video-section__poster media media--transparent media--landscape{% if section.settings.cover_image == blank %} video-section__placeholder{% endif %}">
        {%- if section.settings.cover_image != blank -%}
          <img
            srcset="{%- if section.settings.cover_image.width >= 375 -%}{{ section.settings.cover_image | img_url: '375x' }} 375w,{%- endif -%}
              {%- if section.settings.cover_image.width >= 750 -%}{{ section.settings.cover_image | img_url: '750x' }} 750w,{%- endif -%}
              {%- if section.settings.cover_image.width >= 1100 -%}{{ section.settings.cover_image | img_url: '1100x' }} 1100w,{%- endif -%}
              {%- if section.settings.cover_image.width >= 1500 -%}{{ section.settings.cover_image | img_url: '1500x' }} 1500w,{%- endif -%}
              {%- if section.settings.cover_image.width >= 1780 -%}{{ section.settings.cover_image | img_url: '1780x' }} 1780w,{%- endif -%}
              {%- if section.settings.cover_image.width >= 2000 -%}{{ section.settings.cover_image | img_url: '2000x' }} 2000w,{%- endif -%}
              {%- if section.settings.cover_image.width >= 3000 -%}{{ section.settings.cover_image | img_url: '3000x' }} 3000w,{%- endif -%}
              {%- if section.settings.cover_image.width >= 3840 -%}{{ section.settings.cover_image | img_url: '3840x' }} 3840w,{%- endif -%}"
            src="{{ section.settings.cover_image | img_url: '1920x' }}"
            sizes="{% if section.settings.full_width %}100vw{% else %}(min-width: {{ settings.page_width }}px) {{ settings.page_width | minus: 100 }}px, (min-width: 750px) calc(100vw - 10rem), 100vw{% endif %}"
            alt="{{ 'sections.video.load_video' | t: description: section.settings.video_description | escape }}"
            loading="lazy"
            width="{{ section.settings.cover_image.width }}"
            height="{{ section.settings.cover_image.height }}"
          >
        {%- else -%}
          {{ 'collection-2' | placeholder_svg_tag: 'placeholder-svg placeholder' }}
        {%- endif -%}
      </a>
    </div>
  </noscript>
  <deferred-media class="video-section__media deferred-media no-js-hidden" data-media-id="{{ section.settings.video_url.id }}"
    {% if section.settings.cover_image != blank %} style="padding-bottom: {{ 1 | divided_by: section.settings.cover_image.aspect_ratio | times: 100 }}%;"{% endif %}
  >
    <button
      id="Deferred-Poster-Modal-{{ section.settings.video_url.id }}"
      class="video-section__poster media deferred-media__poster media--landscape"
      type="button"
    >
      {%- if section.settings.cover_image != blank -%}
        <img
          srcset="{%- if section.settings.cover_image.width >= 375 -%}{{ section.settings.cover_image | img_url: '375x' }} 375w,{%- endif -%}
            {%- if section.settings.cover_image.width >= 750 -%}{{ section.settings.cover_image | img_url: '750x' }} 750w,{%- endif -%}
            {%- if section.settings.cover_image.width >= 1100 -%}{{ section.settings.cover_image | img_url: '1100x' }} 1100w,{%- endif -%}
            {%- if section.settings.cover_image.width >= 1500 -%}{{ section.settings.cover_image | img_url: '1500x' }} 1500w,{%- endif -%}
            {%- if section.settings.cover_image.width >= 1780 -%}{{ section.settings.cover_image | img_url: '1780x' }} 1780w,{%- endif -%}
            {%- if section.settings.cover_image.width >= 2000 -%}{{ section.settings.cover_image | img_url: '2000x' }} 2000w,{%- endif -%}
            {%- if section.settings.cover_image.width >= 3000 -%}{{ section.settings.cover_image | img_url: '3000x' }} 3000w,{%- endif -%}
            {%- if section.settings.cover_image.width >= 3840 -%}{{ section.settings.cover_image | img_url: '3840x' }} 3840w,{%- endif -%}"
          src="{{ section.settings.cover_image | img_url: '1920x' }}"
          sizes="{% if section.settings.full_width %}100vw{% else %}(min-width: {{ settings.page_width }}px) {{ settings.page_width | minus: 100 }}px, (min-width: 750px) calc(100vw - 10rem), 100vw{% endif %}"
          alt="{{ 'sections.video.load_video' | t: description: section.settings.video_description | escape }}"
          loading="lazy"
          width="{{ section.settings.cover_image.width }}"
          height="{{ section.settings.cover_image.height }}"
        class="hideMobile">
      {%- else -%}
        {{ 'collection-2' | placeholder_svg_tag: 'placeholder-svg placeholder' }}
      {%- endif -%}
      
      {% assign mobileImage = section.settings.cover_image_mob | default:section.settings.cover_image %}
        {% if  mobileImage != blank %}
          <img 
          src="{{ mobileImage | img_url: 'master' }}"
          alt="{{ 'sections.video.load_video' | t: description: section.settings.video_description | escape }}"
          loading="lazy"
          width="{{ section.settings.cover_image.width }}"
          height="{{ section.settings.cover_image.height }}"
        class="hideDesktop">
       {% endif %}
      <div class="page-width video-caption">
        {%comment%}
        <h2 class="video-title">{{ section.settings.heading }}</h2>
        {%endcomment%}
        <span class="play-icon">
          <img src="{{ 'video-icon.png' | asset_img_url: 'master' }}">
        </span>
      </div>

    </button>
    <template>
      {%- if section.settings.video_url.type == 'youtube' -%}
        <iframe src="https://www.youtube.com/embed/{{ section.settings.video_url.id }}?enablejsapi=1" class="js-youtube" allow="autoplay; encrypted-media" allowfullscreen title="{{ section.settings.description | escape }}"></iframe>
      {%- else -%}
        <iframe src="https://player.vimeo.com/video/{{ section.settings.video_url.id }}" class="js-vimeo" allow="autoplay; encrypted-media" allowfullscreen title="{{ section.settings.description | escape }}"></iframe>
      {%- endif -%}
    </template>
  </deferred-media>
</div>
<!--    video modal      -->
        
        
      </div>
    </div>
  </div>
</div>
    </div>
  </div>

</div>
  </div>
  </div>
</section>

<script type="text/javascript">
  $('.video-close-button').click(function(){
    $(this).closest('.video-pop-modal').find('.js-youtube')[0].contentWindow.postMessage('{"event":"command","func":"' + 'stopVideo' + '","args":""}', '*');
  });
</script>


{% schema %}
  {
    "name": "Text With Video",
    "settings": [
  {
  "type": "image_picker",
  "id": "image",
  "label": "cover image"
  },
  {
  "type": "text",
  "id": "heading",
  "label": "Heading",
  "info": "Heading"
  },
  {
  "type": "text",
  "id": "sub_heading",
  "label": "Sub Heading",
  "info": "Sub Heading"
  },
  {
  "type": "richtext",
  "id": "description",
  "label": "Description"
  },
  {
  "type": "text",
  "id": "button_label",
  "label": "Button Label"
  },
  {
  "type": "url",
  "id": "button_url",
  "label": "Button url"
  },
    {
      "type": "image_picker",
      "id": "cover_image",
      "label": "Pop cover_image"
    },
     {
      "type": "image_picker",
      "id": "cover_image_mob",
      "label": "Pop Image mobile"
    },
    {
      "type": "video_url",
      "id": "video_url",
      "accept": [
        "youtube",
        "vimeo"
      ],
      "default": "https:\/\/www.youtube.com\/watch?v=_9VUPq3SxOc",
      "label": "t:sections.video.settings.video_url.label",
      "placeholder": "t:sections.video.settings.video_url.placeholder",
      "info": "t:sections.video.settings.video_url.info"
    },
    {
      "type": "text",
      "id": "video_description",
      "label": "t:sections.video.settings.description.label",
      "info": "t:sections.video.settings.description.info"
    },
    {
      "type": "checkbox",
      "id": "full_width",
      "label": "t:sections.video.settings.full_width.label",
      "default": false
    }
],
  "presets": [
  {
  "name": "Text with Video",
  "category": "image"
  }
  ]
  }
{% endschema %}

{% stylesheet %}
{% endstylesheet %}

{% javascript %}
{% endjavascript %}
